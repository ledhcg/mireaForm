console.log("Author: LE DINH CUONG"),console.log("Website: dinhcuong.me"),console.log("Email: dinhcuong.firewin99@gmail.com"),console.log("Facebook: @ledhcg"),console.log("Instagram: @ledhcg"),console.log("\n|----------------------------------------|\n|---***---------******----------******---|\n|---***---------***---***-----***--------|\n|---***---------***----***---***---------|\n|---***---------***----***---***---------|\n|---***---------***---***-----***--------|\n|---*********---******----------******---|\n|----------------------------------------|\n\n|----------------------------------------|\n|-------------------------**-------------|\n|----------------------**--*-------------|\n|--------------------**---**-------------|\n|-------------------**---**--------------|\n|------------------**---**---------------|\n|-----------------*******-*******--------|\n|-------------******--**-**--------------|\n|----------***----**-****----------------|\n|--------***------******---------*-------|\n|-------***------***--***********--------|\n|--------**-----**-*----******-----------|\n|----------*****----*--------------------|\n|--------------------*-------------------|\n|---------------------*------------------|\n|-----------------------*----------------|\n|----------------------------------------|\n\n"),console.log("Project: Mirea Form"),console.log("Verson: 0.9");var firebaseConfig={apiKey:"AIzaSyC0hWE4guEcI63vPVvQv9vSpiCY37aXgtw",authDomain:"mirea-form-phieubaucu.firebaseapp.com",databaseURL:"https://mirea-form-phieubaucu.firebaseio.com",projectId:"mirea-form-phieubaucu",storageBucket:"mirea-form-phieubaucu.appspot.com",messagingSenderId:"15447096967",appId:"1:15447096967:web:c9ccd3749f316277194222",measurementId:"G-87PEQ8P6NK"};firebase.initializeApp(firebaseConfig);var getActiveLink=firebase.database().ref("statusLink");getActiveLink.on("value",function(e){e.val().activeLink?checkValid():showBlock()});var keyCheck="Default",getDataCheckCode=firebase.database().ref("check");getDataCheckCode.on("value",function(e){var n=e.val();keyCheck=n.key});var personQuantityNeeded=0;function getQuantity(){var e="",n="";firebase.database().ref("quantity").on("value",function(t){var o=t.val();n+=`LỖI: Cần ${o.value_needed} thành viên được chọn`,personQuantityNeeded=o.value_needed,e+=`<h5 class="alert-heading text-center"><strong>CÁCH THỨC BẦU CHỌN</strong></h5>\n            <p class="text-center">Lựa chọn ${o.value_needed} trong ${o.value_max} ứng viên phía dưới bằng cách ấn vào tên của họ. Bạn cần lựa chọn đủ, không thiếu không thừa thì mới có thể gửi phiếu đi. Để tránh số liệu ảo, chúng tôi chỉ cho phép bạn gửi đi một lần duy nhất.</p>`,document.getElementById("textTutorial").innerHTML=e,document.getElementById("notiErrorVotesForm").innerHTML=n})}var sizeOfDataPerson=0;function showPerson(){var e="";firebase.database().ref("person").on("value",function(n){n.forEach(function(n){var t=n.val();e+=`<div class="col-md-6 col-12">\n                        <input onclick="$(this).attr('value', this.checked ? 1 : 0)" type="checkbox" name="${t.input_id}" id="${t.input_id}" class="checkbox-input" value="0"/>\n                        <label for="${t.input_id}" class="checkbox-label">\n                            <div class="checkbox-text">\n                                <p class="checkbox-text--title">${t.name}</p>\n                                <p class="checkbox-text--description">Ấn để <span class="un">bỏ</span> chọn!</p>\n                            </div>\n                        </label>\n                    </div>`}),e+='  <div class="col-md-6 col-12">\n                        <image class="center-image" src="https://media.giphy.com/media/js5HuiISwySuBbj34z/giphy.gif"></image>                      \n                    </div>',sizeOfDataPerson=n.numChildren(),document.getElementById("showPerson").innerHTML=e,e=""})}function checkValid(){firebase.database().ref("check").on("value",function(e){e.val().key==localStorage.getItem("key")?showStop():(document.getElementById("mireaForm").innerHTML='      <div class="alert alert-info" id="textTutorial">\n                                                                        \x3c!--Content for textTutorial--\x3e\n                                                                    </div>\n                                                                    <div class="row" id="showPerson">\n                                                                        \x3c!--Content for showPerson--\x3e\n                                                                    </div>\n                                                                        <a style="margin-top: 20px"></a>\n                                                                    <div class="row">\n                                                                    \n                                                                        <div class="col-md-6 col-12" id="showInputCode">\n                                                                        \x3c!--Content for showInputCode--\x3e\n                                                                        </div>\n                                                                        <div class="col-md-6 col-12" id="showArenaChoosePerson">\n                                                                        \x3c!--Content for showArenaChoosePerson--\x3e\n                                                                        </div>\n\n                                                                        <div class="col-12 d-flex justify-content-center" style="margin: 20px 0px;">\n                                                                            <button type="submit" class="btn btn-lg btn-primary btn-block">GỬI ĐI</button>\n                                                                        </div>\n                                                                        \n                                                                    </div>\n                                                                    <div class="alert alert-light-danger color-danger text-center alertError" style="display: none;" id="notiErrorVotesForm"><strong>\x3c!--Content for notiErrorVotesForm--\x3e</strong></div>\n                                                                    <div class="alert alert-light-danger color-danger text-center alertCodeValidWrong" style="display: none;"><strong>LỖI - Tên và mã cá nhân không khớp.</strong></div>\n                                                                    <div class="alert alert-light-danger color-danger text-center alertCodeValidNull" style="display: none;"><strong>LỖI - Vui lòng điền mã cá nhân của bạn.</strong></div>\n                                                                    <div class="alert alert-light-danger color-danger text-center alertChooseName" style="display: none;"><strong>LỖI - Vui lòng chọn tên của bạn.</strong></div>',showPerson(),getQuantity(),document.getElementById("showInputCode").innerHTML=' <h6>MÃ ID CÁ NHÂN</h6>\n                                                                     <div class="form-group" >\n                                                                         <input type="text" id="inputCodeValid" class="form-control form-control-lg" name="inputCodeValid"\n                                                                             placeholder="Dán ID từ email của bạn">\n                                                                     </div>',document.getElementById("showArenaChoosePerson").innerHTML=' <h6>NGƯỜI BẦU CỬ</h6>\n                                                                            <div class="form-group">\n                                                                                <select class="form-select form-select-lg"id="inputGroupSelect01" >\n                                                                                 \n                                                                                        \x3c!--Content for inputGroupSelect01--\x3e\n                                                                                   \n                                                                                    \n                                                                                </select>\n                                                                            </div>',showChooseName())})}function showStop(){document.getElementById("mireaForm").innerHTML='<div class="alert alert-success text-center text-white text-success">Cảm ơn. Bạn đã bỏ phiếu thành công.</div>\n                                                        <image class="center-image-success" src="https://media.giphy.com/media/eh7Uqh7n6HRjHQLs3y/giphy.gif"></image>'}function showBlock(){document.getElementById("mireaForm").innerHTML='<div class="alert alert-danger text-center text-white text-success">LINK ĐANG BỊ KHÓA. VUI LÒNG QUAY LẠI SAU!</div>\n                                                        <image class="center-image-success" src="https://media.giphy.com/media/3o6fJeVJSTSXqzwaSk/giphy.gif"></image>'}var dataRef=firebase.database().ref("data");function submitForm(e){e.preventDefault();for(var n=0,t={},o=1;o<=sizeOfDataPerson;o++){var a="person"+o,i=getInputValue(a);t[a]=parseInt(i),n+=parseInt(i)}if(parseInt(getInputValue("inputGroupSelect01")))var r=parseInt(getInputValue("inputGroupSelect01"));else document.querySelector(".alertChooseName").style.display="block",setTimeout(function(){document.querySelector(".alertChooseName").style.display="none"},3e3);if(getInputValue("inputCodeValid"))var c=getInputValue("inputCodeValid");else document.querySelector(".alertCodeValidNull").style.display="block",setTimeout(function(){document.querySelector(".alertCodeValidNull").style.display="none"},3e3);checkCode(r,c)?n===personQuantityNeeded?(saveData(t),firebase.database().ref("checkPerson/"+r).update({check:!0}),localStorage.setItem("key",keyCheck),location.reload()):(document.querySelector(".alertError").style.display="block",setTimeout(function(){document.querySelector(".alertError").style.display="none"},3e3)):(document.querySelector(".alertCodeValidWrong").style.display="block",setTimeout(function(){document.querySelector(".alertCodeValidWrong").style.display="none"},3e3))}function getInputValue(e){return document.getElementById(e).value}function saveData(e){dataRef.push().set(e)}function showChooseName(){var e='<option class="style-select-option-0" selected value="0">Chọn tên của bạn</option>';firebase.database().ref("checkPerson").on("value",function(n){n.forEach(function(n){var t=n.val();t.check||(e+=`<option class="style-select-option" value="${t.id}">${t.fullname}</option>`)}),document.getElementById("inputGroupSelect01").innerHTML=e})}function checkCode(e,n){var t=!1;return firebase.database().ref("checkPerson").on("value",function(o){o.forEach(function(o){var a=o.val();parseInt(a.id)===e&&a.code===n&&(t=!0)})}),t}document.getElementById("mireaForm").addEventListener("submit",submitForm);